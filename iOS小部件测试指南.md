# iOS小部件测试指南

本指南将帮助您测试钓鱼天气应用的iOS小部件功能，确保其与Android端功能保持一致。

## 测试环境

- iOS 14.0或更高版本的设备或模拟器
- 已安装最新版本的钓鱼天气应用

## 测试步骤

### 1. 基本功能测试

1. **安装应用**：
   - 在Xcode中构建并运行应用
   - 确保应用成功安装到设备上

2. **生成初始数据**：
   - 打开应用
   - 允许位置权限（如果请求）
   - 等待应用加载天气数据
   - 确认主屏幕显示天气信息和钓鱼适宜度

3. **添加小部件**：
   - 返回设备主屏幕
   - 长按任意空白区域进入编辑模式
   - 点击左上角的"+"按钮
   - 搜索"钓鱼天气"
   - 添加小、中、大三种尺寸的小部件到主屏幕

4. **验证小部件显示**：
   - 确认小部件显示天气信息（天气图标、天气状况、温度）
   - 确认小部件显示钓鱼适宜度（适宜性文本、评分、颜色指示）
   - 确认小部件显示位置信息
   - 确认小部件显示当前时间（应每分钟更新）

### 2. 多尺寸测试

1. **小尺寸小部件测试**：
   - 验证显示内容：位置、时间、天气图标、温度、适宜度、评分
   - 确认布局紧凑且信息完整

2. **中尺寸小部件测试**：
   - 验证左侧显示天气信息：位置、时间、天气图标、温度、天气状况、气压
   - 验证右侧显示钓鱼适宜度：适宜度文本、评分

3. **大尺寸小部件测试**：
   - 验证顶部显示位置和当前时间
   - 验证中部显示详细天气信息：天气图标、温度、天气状况、气压
   - 验证底部显示钓鱼适宜度：适宜度文本、评分、颜色指示
   - 确认底部有提示文本和更新时间

### 3. 数据更新测试

1. **手动更新测试**：
   - 打开应用
   - 使用搜索功能切换到不同城市
   - 返回主屏幕
   - 验证小部件数据是否更新为新城市的数据

2. **自动更新测试**：
   - 注意：这需要等待较长时间
   - 记录小部件当前显示的更新时间
   - 等待30分钟以上
   - 检查小部件是否自动更新了数据

3. **时间更新测试**：
   - 观察小部件上显示的当前时间
   - 等待1-2分钟
   - 确认时间是否自动更新（与Android端一致）

### 4. 外观测试

1. **深色模式测试**：
   - 切换设备到深色模式
   - 验证小部件适应深色模式
   - 确认文本和图标清晰可见
   - 确认颜色指示正确显示

2. **浅色模式测试**：
   - 切换设备到浅色模式
   - 验证小部件适应浅色模式
   - 确认文本和图标清晰可见
   - 确认颜色指示正确显示

### 5. 多语言测试

1. **中文环境测试**：
   - 将设备语言设置为中文
   - 验证小部件显示中文文本
   - 确认所有标签和提示都正确显示

2. **英文环境测试**：
   - 将设备语言设置为英文
   - 验证小部件显示英文文本
   - 确认所有标签和提示都正确显示

### 6. 交互测试

1. **点击测试**：
   - 点击小部件
   - 确认应用正确启动
   - 确认应用显示相应的天气和钓鱼信息

### 7. 边缘情况测试

1. **无网络测试**：
   - 启用飞行模式
   - 打开应用
   - 验证小部件是否显示缓存的数据

2. **首次使用测试**：
   - 卸载应用
   - 重新安装应用但不打开
   - 添加小部件
   - 验证小部件显示默认/占位数据

3. **权限测试**：
   - 在设置中禁用应用的位置权限
   - 打开应用
   - 验证应用和小部件如何处理缺少权限的情况

## 功能对比检查表

确保iOS小部件与Android小部件具有以下一致的功能：

- [ ] 支持三种尺寸（小、中、大）
- [ ] 显示天气状况（文字和图标）
- [ ] 显示温度
- [ ] 显示钓鱼适宜性评级和颜色指示
- [ ] 显示钓鱼评分
- [ ] 显示当前时间（每分钟更新）
- [ ] 显示位置信息
- [ ] 支持深色/浅色模式
- [ ] 支持中文/英文语言环境
- [ ] 点击小部件打开应用
- [ ] 每30分钟自动更新天气数据

## 报告问题

如果在测试过程中发现任何问题，请记录以下信息：

1. 设备型号和iOS版本
2. 问题的详细描述
3. 重现问题的步骤
4. 截图（如果适用）
5. 与Android端对比的差异（如果适用）

将这些信息发送给开发团队，以便我们能够快速解决问题。